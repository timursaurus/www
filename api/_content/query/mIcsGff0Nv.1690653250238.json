{"_path":"/articles/vite-single-file-output","_dir":"articles","_draft":false,"_partial":false,"_locale":"","_empty":false,"title":"How to make Vite output a single file?","description":"Learn how to configure Vite to (bundle) output a single file.","author":{"name":"Timur Bolotov","avatarUrl":"https://github.com/timursaurus.png","link":"https://www.linkedin.com/in/saurus/"},"date":"2023-04-30T00:00:00.000Z","layout":"article","body":{"type":"root","children":[{"type":"element","tag":"p","props":{},"children":[{"type":"element","tag":"a","props":{"href":"#tldr"},"children":[{"type":"text","value":"TL;DR"}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"element","tag":"icon","props":{"name":"vscode-icons:file-type-vite"},"children":[]},{"type":"text","value":" Vite  is built with ESM in mind, so it chunks your code into multiple files by default."}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"However, if you want to output a single file (bundle), you can do it by configuring "},{"type":"element","tag":"icon","props":{"name":"vscode-icons:file-type-rollup"},"children":[]},{"type":"text","value":" Rollup, which is used by "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"Vite"}]},{"type":"text","value":" under the hood for production builds."}]},{"type":"element","tag":"alert","props":{"type":"info"},"children":[{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"There are multiple reasons why you might want to do this. Mine was to make a "},{"type":"element","tag":"icon","props":{"name":"vscode-icons:file-type-vue"},"children":[]},{"type":"text","value":" Vue application run inside a Siebel CRM Applet. In Siebel CRM, you have to explicitly specify all the files that you want to load from a repository, so it's easier to have a single file."}]}]},{"type":"element","tag":"code","props":{"className":["language-ts"],"code":"import { defineConfig } from \"vite\";\n\nexport default defineConfig({\n  build: {\n    rollupOptions: {\n      output: {\n        inlineDynamicImports: false,\n        format: 'iife',\n        manualChunks: () => {\n          return 'Any string'\n        },\n      },\n    },\n  },\n})\n\n","filename":"vite.config.ts","language":"ts","meta":""},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line","line":1},"children":[{"type":"element","tag":"span","props":{"class":"ct-620894"},"children":[{"type":"text","value":"import"}]},{"type":"element","tag":"span","props":{"class":"ct-947867"},"children":[{"type":"text","value":" { defineConfig } "}]},{"type":"element","tag":"span","props":{"class":"ct-620894"},"children":[{"type":"text","value":"from"}]},{"type":"element","tag":"span","props":{"class":"ct-947867"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-094461"},"children":[{"type":"text","value":"\"vite\""}]},{"type":"element","tag":"span","props":{"class":"ct-947867"},"children":[{"type":"text","value":";\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":2},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":3},"children":[{"type":"element","tag":"span","props":{"class":"ct-620894"},"children":[{"type":"text","value":"export"}]},{"type":"element","tag":"span","props":{"class":"ct-255010"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-620894"},"children":[{"type":"text","value":"default"}]},{"type":"element","tag":"span","props":{"class":"ct-255010"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-745982"},"children":[{"type":"text","value":"defineConfig"}]},{"type":"element","tag":"span","props":{"class":"ct-255010"},"children":[{"type":"text","value":"({\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":4},"children":[{"type":"element","tag":"span","props":{"class":"ct-255010"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-947867"},"children":[{"type":"text","value":"build: {\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":5},"children":[{"type":"element","tag":"span","props":{"class":"ct-947867"},"children":[{"type":"text","value":"    rollupOptions: {\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":6},"children":[{"type":"element","tag":"span","props":{"class":"ct-947867"},"children":[{"type":"text","value":"      output: {\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":7},"children":[{"type":"element","tag":"span","props":{"class":"ct-947867"},"children":[{"type":"text","value":"        inlineDynamicImports: "}]},{"type":"element","tag":"span","props":{"class":"ct-642681"},"children":[{"type":"text","value":"false"}]},{"type":"element","tag":"span","props":{"class":"ct-947867"},"children":[{"type":"text","value":",\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":8},"children":[{"type":"element","tag":"span","props":{"class":"ct-947867"},"children":[{"type":"text","value":"        format: "}]},{"type":"element","tag":"span","props":{"class":"ct-094461"},"children":[{"type":"text","value":"'iife'"}]},{"type":"element","tag":"span","props":{"class":"ct-947867"},"children":[{"type":"text","value":",\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":9},"children":[{"type":"element","tag":"span","props":{"class":"ct-947867"},"children":[{"type":"text","value":"        "}]},{"type":"element","tag":"span","props":{"class":"ct-745982"},"children":[{"type":"text","value":"manualChunks"}]},{"type":"element","tag":"span","props":{"class":"ct-947867"},"children":[{"type":"text","value":": () "}]},{"type":"element","tag":"span","props":{"class":"ct-620894"},"children":[{"type":"text","value":"=>"}]},{"type":"element","tag":"span","props":{"class":"ct-947867"},"children":[{"type":"text","value":" {\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":10},"children":[{"type":"element","tag":"span","props":{"class":"ct-947867"},"children":[{"type":"text","value":"          "}]},{"type":"element","tag":"span","props":{"class":"ct-620894"},"children":[{"type":"text","value":"return"}]},{"type":"element","tag":"span","props":{"class":"ct-947867"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-094461"},"children":[{"type":"text","value":"'Any string'\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":11},"children":[{"type":"element","tag":"span","props":{"class":"ct-947867"},"children":[{"type":"text","value":"        },\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":12},"children":[{"type":"element","tag":"span","props":{"class":"ct-947867"},"children":[{"type":"text","value":"      },\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":13},"children":[{"type":"element","tag":"span","props":{"class":"ct-947867"},"children":[{"type":"text","value":"    },\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":14},"children":[{"type":"element","tag":"span","props":{"class":"ct-947867"},"children":[{"type":"text","value":"  }"}]},{"type":"element","tag":"span","props":{"class":"ct-255010"},"children":[{"type":"text","value":",\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":15},"children":[{"type":"element","tag":"span","props":{"class":"ct-255010"},"children":[{"type":"text","value":"})"}]}]}]}]}]},{"type":"element","tag":"h3","props":{"id":"how-it-works"},"children":[{"type":"text","value":"How it works"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Rollup provides different bundling strategies. We want to use the "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"'iife'"}]},{"type":"text","value":" format, as it's recommended for bundling applications in the "},{"type":"element","tag":"a","props":{"href":"https://rollupjs.org/configuration-options/#output-format","rel":["nofollow"]},"children":[{"type":"text","value":"Rollup docs"}]},{"type":"text","value":"."}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"By configuring "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"manualChunks"}]},{"type":"text","value":" to return the same string, you're telling Rollup to treat each module as a part of the same chunk. This way, you'll get a single file output."}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"The output is usually named "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"index-<hash>.js"}]},{"type":"text","value":". We can confgire the output name by using the "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"entryFileName"}]},{"type":"text","value":" option."}]},{"type":"element","tag":"h2","props":{"id":"tldr"},"children":[{"type":"text","value":"TL;DR"}]},{"type":"element","tag":"code","props":{"className":["language-ts"],"code":"\nimport { defineConfig } from \"vite\";\n\n","filename":"vite.config.ts","language":"ts","meta":""},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line","line":1},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":2},"children":[{"type":"element","tag":"span","props":{"class":"ct-620894"},"children":[{"type":"text","value":"import"}]},{"type":"element","tag":"span","props":{"class":"ct-947867"},"children":[{"type":"text","value":" { defineConfig } "}]},{"type":"element","tag":"span","props":{"class":"ct-620894"},"children":[{"type":"text","value":"from"}]},{"type":"element","tag":"span","props":{"class":"ct-947867"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-094461"},"children":[{"type":"text","value":"\"vite\""}]},{"type":"element","tag":"span","props":{"class":"ct-947867"},"children":[{"type":"text","value":";"}]}]}]}]}]},{"type":"element","tag":"h3","props":{"id":"work-in-progress"},"children":[{"type":"text","value":"Work in progress..."}]},{"type":"element","tag":"style","children":[{"type":"text","value":".ct-620894{color:#CF222E;}\n.dark .ct-620894{color:#FF7B72;}\n.ct-947867{color:#24292F;}\n.dark .ct-947867{color:#C9D1D9;}\n.ct-094461{color:#0A3069;}\n.dark .ct-094461{color:#A5D6FF;}\n.ct-255010{color:#953800;}\n.dark .ct-255010{color:#FFA657;}\n.ct-745982{color:#8250DF;}\n.dark .ct-745982{color:#D2A8FF;}\n.ct-642681{color:#0550AE;}\n.dark .ct-642681{color:#79C0FF;}"}]}],"toc":{"title":"","searchDepth":2,"depth":2,"links":[{"id":"how-it-works","depth":3,"text":"How it works"},{"id":"tldr","depth":2,"text":"TL;DR","children":[{"id":"work-in-progress","depth":3,"text":"Work in progress..."}]}]}},"_type":"markdown","_id":"content:articles:vite-single-file-output.md","_source":"content","_file":"articles/vite-single-file-output.md","_extension":"md"}